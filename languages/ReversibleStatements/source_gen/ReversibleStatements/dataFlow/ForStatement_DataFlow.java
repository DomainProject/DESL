package ReversibleStatements.dataFlow;

/*Generated by MPS */

import jetbrains.mps.lang.dataFlow.DataFlowBuilder;
import jetbrains.mps.lang.dataFlow.DataFlowBuilderContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import com.mbeddr.core.expressions.behavior.Expression__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class ForStatement_DataFlow extends DataFlowBuilder {
  public void build(final DataFlowBuilderContext _context) {
    if (SLinkOperations.getTarget(_context.getNode(), LINKS.iterator$fwes) != null) {
      _context.getBuilder().build((SNode) SLinkOperations.getTarget(_context.getNode(), LINKS.iterator$fwes));
    }
    for (SNode additionalIterator : ListSequence.fromList(SLinkOperations.getChildren(_context.getNode(), LINKS.additionalIterators$umBI))) {
      _context.getBuilder().build((SNode) additionalIterator);
    }

    _context.getBuilder().emitLabel("start");

    if (SLinkOperations.getTarget(_context.getNode(), LINKS.condition$fwVv) != null && (boolean) Expression__BehaviorDescriptor.isStaticallyEvaluatable_id3ilck8Kr3zN.invoke(SLinkOperations.getTarget(_context.getNode(), LINKS.condition$fwVv)) && Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(_context.getNode(), LINKS.condition$fwVv)) instanceof Boolean) {
      Boolean value = (Boolean) Expression__BehaviorDescriptor.evaluateStatically_id6OxpEKG0KPv.invoke(SLinkOperations.getTarget(_context.getNode(), LINKS.condition$fwVv));
      if (!(value)) {
        _context.getBuilder().emitJump(_context.getBuilder().after(_context.getNode()), "r:c205ea72-20c5-48ea-9b1b-6756ae88d68b(ReversibleStatements.dataFlow)/2873522757967662474");
      }
    } else if (SLinkOperations.getTarget(_context.getNode(), LINKS.condition$fwVv) != null) {
      _context.getBuilder().build((SNode) SLinkOperations.getTarget(_context.getNode(), LINKS.condition$fwVv));
      _context.getBuilder().emitIfJump(_context.getBuilder().after(_context.getNode()), "r:c205ea72-20c5-48ea-9b1b-6756ae88d68b(ReversibleStatements.dataFlow)/2873522757967662504");
    }

    if (SLinkOperations.getTarget(_context.getNode(), LINKS.body$fofU) != null) {
      _context.getBuilder().build((SNode) SLinkOperations.getTarget(_context.getNode(), LINKS.body$fofU));
    }

    for (SNode incr : ListSequence.fromList(SLinkOperations.getChildren(_context.getNode(), LINKS.incr$fAzR))) {
      final SNode finalIncr = incr;
      _context.getBuilder().emitMayBeUnreachable(() -> _context.getBuilder().build((SNode) finalIncr));
    }

    _context.getBuilder().emitMayBeUnreachable(() -> _context.getBuilder().emitJump(_context.getBuilder().label(_context.getNode(), "start"), "r:c205ea72-20c5-48ea-9b1b-6756ae88d68b(ReversibleStatements.dataFlow)/2873522757967668658"));

  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink iterator$fwes = MetaAdapterFactory.getContainmentLink(0xf75f9e3fb00b4997L, 0x8af20a8ce6b25221L, 0x64ae61a40186e676L, 0x64ae61a401870e40L, "iterator");
    /*package*/ static final SContainmentLink additionalIterators$umBI = MetaAdapterFactory.getContainmentLink(0xf75f9e3fb00b4997L, 0x8af20a8ce6b25221L, 0x64ae61a40186e676L, 0x5239321dec4ec665L, "additionalIterators");
    /*package*/ static final SContainmentLink condition$fwVv = MetaAdapterFactory.getContainmentLink(0xf75f9e3fb00b4997L, 0x8af20a8ce6b25221L, 0x64ae61a40186e676L, 0x64ae61a401870e43L, "condition");
    /*package*/ static final SContainmentLink body$fofU = MetaAdapterFactory.getContainmentLink(0xf75f9e3fb00b4997L, 0x8af20a8ce6b25221L, 0x64ae61a40186e676L, 0x64ae61a401870e33L, "body");
    /*package*/ static final SContainmentLink incr$fAzR = MetaAdapterFactory.getContainmentLink(0xf75f9e3fb00b4997L, 0x8af20a8ce6b25221L, 0x64ae61a40186e676L, 0x64ae61a401870e46L, "incr");
  }
}
